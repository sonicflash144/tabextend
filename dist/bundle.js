(()=>{var e={353:function(e){e.exports=function(){"use strict";var e=6e4,t=36e5,n="millisecond",r="second",s="minute",i="hour",a="day",o="week",l="month",c="quarter",d="year",u="date",m="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},y=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},p={s:y,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),s=n%60;return(t<=0?"+":"-")+y(r,2,"0")+":"+y(s,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),s=t.clone().add(r,l),i=n-s<0,a=t.clone().add(r+(i?-1:1),l);return+(-(r+(n-s)/(i?s-a:a-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:d,w:o,d:a,D:u,h:i,m:s,s:r,ms:n,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},v="en",T={};T[v]=g;var w="$isDayjsObject",x=function(e){return e instanceof $||!(!e||!e[w])},b=function e(t,n,r){var s;if(!t)return v;if("string"==typeof t){var i=t.toLowerCase();T[i]&&(s=i),n&&(T[i]=n,s=i);var a=t.split("-");if(!s&&a.length>1)return e(a[0])}else{var o=t.name;T[o]=t,s=o}return!r&&s&&(v=s),s||!r&&v},E=function(e,t){if(x(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new $(n)},S=p;S.l=b,S.i=x,S.w=function(e,t){return E(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var $=function(){function g(e){this.$L=b(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var y=g.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(h);if(r){var s=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return S},y.isValid=function(){return!(this.$d.toString()===m)},y.isSame=function(e,t){var n=E(e);return this.startOf(t)<=n&&n<=this.endOf(t)},y.isAfter=function(e,t){return E(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<E(e)},y.$g=function(e,t,n){return S.u(e)?this[t]:this.set(n,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var n=this,c=!!S.u(t)||t,m=S.p(e),h=function(e,t){var r=S.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return c?r:r.endOf(a)},f=function(e,t){return S.w(n.toDate()[e].apply(n.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},g=this.$W,y=this.$M,p=this.$D,v="set"+(this.$u?"UTC":"");switch(m){case d:return c?h(1,0):h(31,11);case l:return c?h(1,y):h(0,y+1);case o:var T=this.$locale().weekStart||0,w=(g<T?g+7:g)-T;return h(c?p-w:p+(6-w),y);case a:case u:return f(v+"Hours",0);case i:return f(v+"Minutes",1);case s:return f(v+"Seconds",2);case r:return f(v+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var o,c=S.p(e),m="set"+(this.$u?"UTC":""),h=(o={},o[a]=m+"Date",o[u]=m+"Date",o[l]=m+"Month",o[d]=m+"FullYear",o[i]=m+"Hours",o[s]=m+"Minutes",o[r]=m+"Seconds",o[n]=m+"Milliseconds",o)[c],f=c===a?this.$D+(t-this.$W):t;if(c===l||c===d){var g=this.clone().set(u,1);g.$d[h](f),g.init(),this.$d=g.set(u,Math.min(this.$D,g.daysInMonth())).$d}else h&&this.$d[h](f);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[S.p(e)]()},y.add=function(n,c){var u,m=this;n=Number(n);var h=S.p(c),f=function(e){var t=E(m);return S.w(t.date(t.date()+Math.round(e*n)),m)};if(h===l)return this.set(l,this.$M+n);if(h===d)return this.set(d,this.$y+n);if(h===a)return f(1);if(h===o)return f(7);var g=(u={},u[s]=e,u[i]=t,u[r]=1e3,u)[h]||1,y=this.$d.getTime()+n*g;return S.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||m;var r=e||"YYYY-MM-DDTHH:mm:ssZ",s=S.z(this),i=this.$H,a=this.$m,o=this.$M,l=n.weekdays,c=n.months,d=n.meridiem,u=function(e,n,s,i){return e&&(e[n]||e(t,r))||s[n].slice(0,i)},h=function(e){return S.s(i%12||12,e,"0")},g=d||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(f,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return S.s(t.$y,4,"0");case"M":return o+1;case"MM":return S.s(o+1,2,"0");case"MMM":return u(n.monthsShort,o,c,3);case"MMMM":return u(c,o);case"D":return t.$D;case"DD":return S.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return u(n.weekdaysMin,t.$W,l,2);case"ddd":return u(n.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(i);case"HH":return S.s(i,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return g(i,a,!0);case"A":return g(i,a,!1);case"m":return String(a);case"mm":return S.s(a,2,"0");case"s":return String(t.$s);case"ss":return S.s(t.$s,2,"0");case"SSS":return S.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(n,u,m){var h,f=this,g=S.p(u),y=E(n),p=(y.utcOffset()-this.utcOffset())*e,v=this-y,T=function(){return S.m(f,y)};switch(g){case d:h=T()/12;break;case l:h=T();break;case c:h=T()/3;break;case o:h=(v-p)/6048e5;break;case a:h=(v-p)/864e5;break;case i:h=v/t;break;case s:h=v/e;break;case r:h=v/1e3;break;default:h=v}return m?h:S.a(h)},y.daysInMonth=function(){return this.endOf(l).$D},y.$locale=function(){return T[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=b(e,t,!0);return r&&(n.$L=r),n},y.clone=function(){return S.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},g}(),C=$.prototype;return E.prototype=C,[["$ms",n],["$s",r],["$m",s],["$H",i],["$W",a],["$M",l],["$y",d],["$D",u]].forEach((function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),E.extend=function(e,t){return e.$i||(e(t,$,E),e.$i=!0),E},E.locale=b,E.isDayjs=x,E.unix=function(e){return E(1e3*e)},E.en=T[v],E.Ls=T,E.p={},E}()},816:function(e){e.exports=function(){"use strict";var e="month",t="quarter";return function(n,r){var s=r.prototype;s.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var i=s.add;s.add=function(n,r){return n=Number(n),this.$utils().p(r)===t?this.add(3*n,e):i.bind(this)(n,r)};var a=s.startOf;s.startOf=function(n,r){var s=this.$utils(),i=!!s.u(r)||r;if(s.p(n)===t){var o=this.quarter()-1;return i?this.month(3*o).startOf(e).startOf("day"):this.month(3*o+2).endOf(e).endOf("day")}return a.bind(this)(n,r)}}}()}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}(()=>{"use strict";var e,t,r,s,i=n(816),a=n(353);function o(e,t){e.assign("day",t.date()),e.assign("month",t.month()+1),e.assign("year",t.year())}function l(t,n){t.assign("hour",n.hour()),t.assign("minute",n.minute()),t.assign("second",n.second()),t.assign("millisecond",n.millisecond()),t.get("hour")<12?t.assign("meridiem",e.AM):t.assign("meridiem",e.PM)}function c(e,t){e.imply("day",t.date()),e.imply("month",t.month()+1),e.imply("year",t.year())}function d(e,t){e.imply("hour",t.hour()),e.imply("minute",t.minute()),e.imply("second",t.second()),e.imply("millisecond",t.millisecond())}(s=e||(e={}))[s.AM=0]="AM",s[s.PM=1]="PM",function(e){e[e.SUNDAY=0]="SUNDAY",e[e.MONDAY=1]="MONDAY",e[e.TUESDAY=2]="TUESDAY",e[e.WEDNESDAY=3]="WEDNESDAY",e[e.THURSDAY=4]="THURSDAY",e[e.FRIDAY=5]="FRIDAY",e[e.SATURDAY=6]="SATURDAY"}(t||(t={})),function(e){e[e.JANUARY=1]="JANUARY",e[e.FEBRUARY=2]="FEBRUARY",e[e.MARCH=3]="MARCH",e[e.APRIL=4]="APRIL",e[e.MAY=5]="MAY",e[e.JUNE=6]="JUNE",e[e.JULY=7]="JULY",e[e.AUGUST=8]="AUGUST",e[e.SEPTEMBER=9]="SEPTEMBER",e[e.OCTOBER=10]="OCTOBER",e[e.NOVEMBER=11]="NOVEMBER",e[e.DECEMBER=12]="DECEMBER"}(r||(r={}));const u={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:{timezoneOffsetDuringDst:120,timezoneOffsetNonDst:60,dstStart:e=>h(e,r.MARCH,t.SUNDAY,2),dstEnd:e=>h(e,r.OCTOBER,t.SUNDAY,3)},CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CT:{timezoneOffsetDuringDst:-300,timezoneOffsetNonDst:-360,dstStart:e=>m(e,r.MARCH,t.SUNDAY,2,2),dstEnd:e=>m(e,r.NOVEMBER,t.SUNDAY,1,2)},CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:{timezoneOffsetDuringDst:-240,timezoneOffsetNonDst:-300,dstStart:e=>m(e,r.MARCH,t.SUNDAY,2,2),dstEnd:e=>m(e,r.NOVEMBER,t.SUNDAY,1,2)},FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MT:{timezoneOffsetDuringDst:-360,timezoneOffsetNonDst:-420,dstStart:e=>m(e,r.MARCH,t.SUNDAY,2,2),dstEnd:e=>m(e,r.NOVEMBER,t.SUNDAY,1,2)},MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:{timezoneOffsetDuringDst:-420,timezoneOffsetNonDst:-480,dstStart:e=>m(e,r.MARCH,t.SUNDAY,2,2),dstEnd:e=>m(e,r.NOVEMBER,t.SUNDAY,1,2)},PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function m(e,t,n,r,s=0){let i=0,a=0;for(;a<r;)i++,new Date(e,t-1,i).getDay()===n&&a++;return new Date(e,t-1,i,s)}function h(e,t,n,r=0){const s=0===n?7:n,i=new Date(e,t-1+1,1,12),a=0===i.getDay()?7:i.getDay();let o;return o=a===s?7:a<s?7+a-s:a-s,i.setDate(i.getDate()-o),new Date(e,t-1,i.getDate(),r)}function f(e,t,n={}){if(null==e)return null;if("number"==typeof e)return e;const r=n[e]??u[e];return null==r?null:"number"==typeof r?r:null==t?null:a(t).isAfter(r.dstStart(t.getFullYear()))&&!a(t).isAfter(r.dstEnd(t.getFullYear()))?r.timezoneOffsetDuringDst:r.timezoneOffsetNonDst}a.extend(i);class g{constructor(e){(e=e??new Date)instanceof Date?this.instant=e:(this.instant=e.instant??new Date,this.timezoneOffset=f(e.timezone,this.instant))}getDateWithAdjustedTimezone(){return new Date(this.instant.getTime()+6e4*this.getSystemTimezoneAdjustmentMinute(this.instant))}getSystemTimezoneAdjustmentMinute(e,t){(!e||e.getTime()<0)&&(e=new Date);const n=-e.getTimezoneOffset();return n-(t??this.timezoneOffset??n)}}class y{constructor(e,t){if(this._tags=new Set,this.reference=e,this.knownValues={},this.impliedValues={},t)for(const e in t)this.knownValues[e]=t[e];const n=a(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues||(this.impliedValues[e]=t),this}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){const e=new y(this.reference);e.knownValues={},e.impliedValues={};for(const t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(const t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!(this.isCertain("weekday")||this.isCertain("day")||this.isCertain("month")||this.isCertain("year"))}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isDateWithUnknownYear(){return this.isCertain("month")&&!this.isCertain("year")}isValidDate(){const e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||null!=this.get("hour")&&e.getHours()!=this.get("hour")||null!=this.get("minute")&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {\n            tags: ${JSON.stringify(Array.from(this._tags).sort())}, \n            knownValues: ${JSON.stringify(this.knownValues)}, \n            impliedValues: ${JSON.stringify(this.impliedValues)}}, \n            reference: ${JSON.stringify(this.reference)}]`}dayjs(){return a(this.date())}date(){const e=this.dateWithoutTimezoneAdjustment(),t=this.reference.getSystemTimezoneAdjustmentMinute(e,this.get("timezoneOffset"));return new Date(e.getTime()+6e4*t)}addTag(e){return this._tags.add(e),this}addTags(e){for(const t of e)this._tags.add(t);return this}tags(){return new Set(this._tags)}dateWithoutTimezoneAdjustment(){const e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}static createRelativeFromReference(e,t){let n=a(e.instant);for(const e in t)n=n.add(t[e],e);const r=new y(e);return t.hour||t.minute||t.second?(l(r,n),o(r,n),null!==e.timezoneOffset&&r.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(d(r,n),null!==e.timezoneOffset&&r.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(r.assign("day",n.date()),r.assign("month",n.month()+1),r.assign("year",n.year())):t.week?(r.assign("day",n.date()),r.assign("month",n.month()+1),r.assign("year",n.year()),r.imply("weekday",n.day())):(r.imply("day",n.date()),t.month?(r.assign("month",n.month()+1),r.assign("year",n.year())):(r.imply("month",n.month()+1),t.year?r.assign("year",n.year()):r.imply("year",n.year())))),r}}class p{constructor(e,t,n,r,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=r||new y(e),this.end=s}clone(){const e=new p(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}tags(){const e=new Set(this.start.tags());if(this.end)for(const t of this.end.tags())e.add(t);return e}toString(){const e=Array.from(this.tags()).sort();return`[ParsingResult {index: ${this.index}, text: '${this.text}', tags: ${JSON.stringify(e)} ...}]`}}function v(e,t,n="\\s{0,5},?\\s{0,5}"){const r=t.replace(/\((?!\?)/g,"(?:");return`${e}${r}(?:${n}${r}){0,10}`}function T(e){const t=function(e){let t;return t=e instanceof Array?[...e]:e instanceof Map?Array.from(e.keys()):Object.keys(e),t}(e).sort(((e,t)=>t.length-e.length)).join("|").replace(/\./g,"\\.");return`(?:${t})`}function w(e){return e<100&&(e+=e>50?1900:2e3),e}function x(e,t,n){const r=a(e);let s=r;s=s.month(n-1),s=s.date(t),s=s.year(r.year());const i=s.add(1,"y"),o=s.add(-1,"y");return Math.abs(i.diff(r))<Math.abs(s.diff(r))?s=i:Math.abs(o.diff(r))<Math.abs(s.diff(r))&&(s=o),s.year()}const b={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6},E={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},S={...E,jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12},$={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},C={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31},A={second:"second",seconds:"second",minute:"minute",minutes:"minute",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",quarter:"quarter",quarters:"quarter",year:"year",years:"year"},D={s:"second",sec:"second",second:"second",seconds:"second",m:"minute",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",d:"d",day:"d",days:"d",w:"w",week:"week",weeks:"week",mo:"month",mon:"month",mos:"month",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year",...A},L=`(?:${T($)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|the|a?\\s{0,2}couple\\s{0,2}(?:of)?)`,M=`(?:${T(C)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function R(e){let t=e.toLowerCase();return void 0!==C[t]?C[t]:(t=t.replace(/(?:st|nd|rd|th)$/i,""),parseInt(t))}const P="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9]|2[0-5])";function k(e){return/BE/i.test(e)?(e=e.replace(/BE/i,""),parseInt(e)-543):/BCE?/i.test(e)?(e=e.replace(/BCE?/i,""),-parseInt(e)):/(AD|CE)/i.test(e)?(e=e.replace(/(AD|CE)/i,""),parseInt(e)):w(parseInt(e))}const O=`(${L})\\s{0,3}(${T(D)})`,I=new RegExp(O,"i"),W=`(${L})\\s{0,3}(${T(A)})`,N="\\s{0,5},?(?:\\s*and)?\\s{0,5}",Y=v("(?:(?:about|around)\\s{0,3})?",O,N),z=v("(?:(?:about|around)\\s{0,3})?",W,N);function q(e){const t={};let n=e,r=I.exec(n);for(;r;)B(t,r),n=n.substring(r[0].length).trim(),r=I.exec(n);return 0==Object.keys(t).length?null:t}function B(e,t){if(t[0].match(/^[a-zA-Z]+$/))return;const n=function(e){const t=e.toLowerCase();return void 0!==$[t]?$[t]:"a"===t||"an"===t||"the"==t?1:t.match(/few/)?3:t.match(/half/)?.5:t.match(/couple/)?2:t.match(/several/)?7:parseFloat(t)}(t[1]);e[D[t[2].toLowerCase()]]=n}class F{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}innerPatternHasChange(e,t){return this.innerPattern(e)!==t}patternLeftBoundary(){return"(\\W|^)"}pattern(e){return this.cachedInnerPattern&&!this.innerPatternHasChange(e,this.cachedInnerPattern)||(this.cachedInnerPattern=this.innerPattern(e),this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${this.cachedInnerPattern.source}`,this.cachedInnerPattern.flags)),this.cachedPattern}extract(e,t){const n=t[1]??"";t.index=t.index+n.length,t[0]=t[0].substring(n.length);for(let e=2;e<t.length;e++)t[e-1]=t[e];return this.innerExtract(e,t)}}const H=new RegExp(`(?:(?:within|in|for)\\s*)?(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Y})(?=\\W|$)`,"i"),U=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Y})(?=\\W|$)`,"i"),V=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${z})(?=\\W|$)`,"i");class j extends F{constructor(e){super(),this.strictMode=e}innerPattern(e){return this.strictMode?V:e.option.forwardDate?H:U}innerExtract(e,t){if(t[0].match(/^for\s*the\s*\w+/))return null;const n=q(t[1]);return n?y.createRelativeFromReference(e.reference,n):null}}const K=new RegExp(`(?:on\\s{0,3})?(${M})(?:\\s{0,3}(?:to|\\-|\\–|until|through|till)?\\s{0,3}(${M}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${T(S)})(?:(?:-|/|,?\\s{0,3})(${P}(?!\\w)))?(?=\\W|$)`,"i");class _ extends F{innerPattern(){return K}innerExtract(e,t){const n=e.createParsingResult(t.index,t[0]),r=S[t[3].toLowerCase()],s=R(t[1]);if(s>31)return t.index=t.index+t[1].length,null;if(n.start.assign("month",r),n.start.assign("day",s),t[4]){const e=k(t[4]);n.start.assign("year",e)}else{const t=x(e.refDate,s,r);n.start.imply("year",t)}if(t[2]){const e=R(t[2]);n.end=n.start.clone(),n.end.assign("day",e)}return n}}const G=new RegExp(`(${T(S)})(?:-|/|\\s*,?\\s*)(${M})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${M})\\s*)?(?:(?:-|/|\\s*,\\s*|\\s+)(${P}))?(?=\\W|$)(?!\\:\\d)`,"i");class J extends F{constructor(e){super(),this.shouldSkipYearLikeDate=e}innerPattern(){return G}innerExtract(e,t){const n=S[t[1].toLowerCase()],r=R(t[2]);if(r>31)return null;if(this.shouldSkipYearLikeDate&&!t[3]&&!t[4]&&t[2].match(/^2[0-5]$/))return null;const s=e.createParsingComponents({day:r,month:n}).addTag("parser/ENMonthNameMiddleEndianParser");if(t[4]){const e=k(t[4]);s.assign("year",e)}else{const t=x(e.refDate,r,n);s.imply("year",t)}if(!t[3])return s;const i=R(t[3]),a=e.createParsingResult(t.index,t[0]);return a.start=s,a.end=s.clone(),a.end.assign("day",i),a}}const Z=new RegExp(`((?:in)\\s*)?(${T(S)})\\s*(?:[,-]?\\s*(${P})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i");class X extends F{innerPattern(){return Z}innerExtract(e,t){const n=t[2].toLowerCase();if(t[0].length<=3&&!E[n])return null;const r=e.createParsingResult(t.index+(t[1]||"").length,t.index+t[0].length);r.start.imply("day",1),r.start.addTag("parser/ENMonthNameParser");const s=S[n];if(r.start.assign("month",s),t[3]){const e=k(t[3]);r.start.assign("year",e)}else{const t=x(e.refDate,1,s);r.start.imply("year",t)}return r}}const Q=new RegExp(`([0-9]{4})[-\\.\\/\\s](?:(${T(S)})|([0-9]{1,2}))[-\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i");class ee extends F{constructor(e){super(),this.strictMonthDateOrder=e}innerPattern(){return Q}innerExtract(e,t){const n=parseInt(t[1]);let r=parseInt(t[4]),s=t[3]?parseInt(t[3]):S[t[2].toLowerCase()];if(s<1||s>12){if(this.strictMonthDateOrder)return null;r>=1&&r<=12&&([s,r]=[r,s])}return r<1||r>31?null:{day:r,month:s,year:n}}}const te=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i");class ne extends F{innerPattern(){return te}innerExtract(e,t){const n=parseInt(t[2]),r=parseInt(t[1]);return e.createParsingComponents().imply("day",1).assign("month",r).assign("year",n)}}class re{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?!/)(?=\\W|$)"}followingSuffix(){return"(?!/)(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){const n=this.extractPrimaryTimeComponents(e,t);if(!n)return t[0].match(/^\d{4}/)?(t.index+=4,null):(t.index+=t[0].length,null);const r=t.index+t[1].length,s=t[0].substring(t[1].length),i=e.createParsingResult(r,s,n);t.index+=t[0].length;const a=e.text.substring(t.index),o=this.getFollowingTimePatternThroughCache().exec(a);if(s.match(/^\d{3,4}/)&&o){if(o[0].match(/^\s*([+-])\s*\d{2,4}$/))return null;if(o[0].match(/^\s*([+-])\s*\d{2}\W\d{2}/))return null}return!o||o[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(i):(i.end=this.extractFollowingTimeComponents(e,o,i),i.end&&(i.text+=o[0]),this.checkAndReturnWithFollowingPattern(i))}extractPrimaryTimeComponents(t,n,r=!1){const s=t.createParsingComponents();let i=0,a=null,o=parseInt(n[2]);if(o>100){if(this.strictMode||null!=n[3])return null;i=o%100,o=Math.floor(o/100)}if(o>24)return null;if(null!=n[3]){if(1==n[3].length&&!n[6])return null;i=parseInt(n[3])}if(i>=60)return null;if(o>12&&(a=e.PM),null!=n[6]){if(o>12)return null;const t=n[6][0].toLowerCase();"a"==t&&(a=e.AM,12==o&&(o=0)),"p"==t&&(a=e.PM,12!=o&&(o+=12))}if(s.assign("hour",o),s.assign("minute",i),null!==a?s.assign("meridiem",a):o<12?s.imply("meridiem",e.AM):s.imply("meridiem",e.PM),null!=n[5]){const e=parseInt(n[5].substring(0,3));if(e>=1e3)return null;s.assign("millisecond",e)}if(null!=n[4]){const e=parseInt(n[4]);if(e>=60)return null;s.assign("second",e)}return s}extractFollowingTimeComponents(t,n,r){const s=t.createParsingComponents();if(null!=n[5]){const e=parseInt(n[5].substring(0,3));if(e>=1e3)return null;s.assign("millisecond",e)}if(null!=n[4]){const e=parseInt(n[4]);if(e>=60)return null;s.assign("second",e)}let i=parseInt(n[2]),a=0,o=-1;if(null!=n[3]?a=parseInt(n[3]):i>100&&(a=i%100,i=Math.floor(i/100)),a>=60||i>24)return null;if(i>=12&&(o=e.PM),null!=n[6]){if(i>12)return null;const t=n[6][0].toLowerCase();"a"==t&&(o=e.AM,12==i&&(i=0,s.isCertain("day")||s.imply("day",s.get("day")+1))),"p"==t&&(o=e.PM,12!=i&&(i+=12)),r.start.isCertain("meridiem")||(o==e.AM?(r.start.imply("meridiem",e.AM),12==r.start.get("hour")&&r.start.assign("hour",0)):(r.start.imply("meridiem",e.PM),12!=r.start.get("hour")&&r.start.assign("hour",r.start.get("hour")+12)))}return s.assign("hour",i),s.assign("minute",a),o>=0?s.assign("meridiem",o):r.start.isCertain("meridiem")&&r.start.get("hour")>12?r.start.get("hour")-12>i?s.imply("meridiem",e.AM):i<=12&&(s.assign("hour",i+12),s.assign("meridiem",e.PM)):i>12?s.imply("meridiem",e.PM):i<=12&&s.imply("meridiem",e.AM),s.date().getTime()<r.start.date().getTime()&&s.imply("day",s.get("day")+1),s}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/))return null;if(e.text.match(/^\d\d\d+$/))return null;if(e.text.match(/\d[apAP]$/))return null;const t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){const e=t[1];if(this.strictMode)return null;if(e.includes(".")&&!e.match(/\d(\.\d{2})+$/))return null;if(parseInt(e)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;const t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;const e=t[1],n=t[2];if(n.includes(".")&&!n.match(/\d(\.\d{2})+$/))return null;const r=parseInt(n),s=parseInt(e);if(r>24||s>24)return null}return e}getPrimaryTimePatternThroughCache(){const e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t||(this.cachedPrimaryTimePattern=function(e,t,n,r){return new RegExp(`${e}${t}(\\d{1,4})(?:(?:\\.|:|：)(\\d{1,2})(?:(?::|：)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${n}`,r)}(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t),this.cachedPrimaryTimePattern}getFollowingTimePatternThroughCache(){const e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t||(this.cachedFollowingTimePatten=function(e,t){return new RegExp(`^(${e})(\\d{1,4})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,"i")}(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t),this.cachedFollowingTimePatten}}class se extends re{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\–|\\~|\\〜|to|until|through|till|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(t,n){const r=super.extractPrimaryTimeComponents(t,n);if(!r)return r;if(n[0].endsWith("night")){const t=r.get("hour");t>=6&&t<12?(r.assign("hour",r.get("hour")+12),r.assign("meridiem",e.PM)):t<6&&r.assign("meridiem",e.AM)}if(n[0].endsWith("afternoon")){r.assign("meridiem",e.PM);const t=r.get("hour");t>=0&&t<=6&&r.assign("hour",r.get("hour")+12)}return n[0].endsWith("morning")&&(r.assign("meridiem",e.AM),r.get("hour")<12&&r.assign("hour",r.get("hour"))),r.addTag("parser/ENTimeExpressionParser")}}function ie(e){const t={};for(const n in e)t[n]=-e[n];return t}const ae=new RegExp(`(${Y})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),oe=new RegExp(`(${z})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i");class le extends F{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?oe:ae}innerExtract(e,t){const n=q(t[1]);if(!n)return null;const r=ie(n);return y.createRelativeFromReference(e.reference,r)}}const ce=new RegExp(`(${Y})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),de=new RegExp(`(${z})\\s{0,5}(later|after|from now)(?=\\W|$)`,"i");class ue extends F{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?de:ce}innerExtract(e,t){const n=q(t[1]);return n?y.createRelativeFromReference(e.reference,n):null}}class me{refine(e,t){return t.filter((t=>this.isValid(e,t)))}}class he{refine(e,t){if(t.length<2)return t;const n=[];let r=t[0],s=null;for(let i=1;i<t.length;i++){s=t[i];const a=e.text.substring(r.index+r.text.length,s.index);if(this.shouldMergeResults(a,r,s,e)){const t=r,n=s,i=this.mergeResults(a,t,n,e);e.debug((()=>{console.log(`${this.constructor.name} merged ${t} and ${n} into ${i}`)})),r=i}else n.push(r),r=s}return null!=r&&n.push(r),n}}class fe extends he{shouldMergeResults(e,t,n){return!t.end&&!n.end&&null!=e.match(this.patternBetween())}mergeResults(e,t,n){if(t.start.isOnlyWeekdayComponent()||n.start.isOnlyWeekdayComponent()||(n.start.getCertainComponents().forEach((e=>{t.start.isCertain(e)||t.start.imply(e,n.start.get(e))})),t.start.getCertainComponents().forEach((e=>{n.start.isCertain(e)||n.start.imply(e,t.start.get(e))}))),t.start.date().getTime()>n.start.date().getTime()){let e=t.start.dayjs(),r=n.start.dayjs();n.start.isOnlyWeekdayComponent()&&r.add(7,"days").isAfter(e)?(r=r.add(7,"days"),n.start.imply("day",r.date()),n.start.imply("month",r.month()+1),n.start.imply("year",r.year())):t.start.isOnlyWeekdayComponent()&&e.add(-7,"days").isBefore(r)?(e=e.add(-7,"days"),t.start.imply("day",e.date()),t.start.imply("month",e.month()+1),t.start.imply("year",e.year())):n.start.isDateWithUnknownYear()&&r.add(1,"years").isAfter(e)?(r=r.add(1,"years"),n.start.imply("year",r.year())):t.start.isDateWithUnknownYear()&&e.add(-1,"years").isBefore(r)?(e=e.add(-1,"years"),t.start.imply("year",e.year())):[n,t]=[t,n]}const r=t.clone();return r.start=t.start,r.end=n.start,r.index=Math.min(t.index,n.index),t.index<n.index?r.text=t.text+e+n.text:r.text=n.text+e+t.text,r}}class ge extends fe{patternBetween(){return/^\s*(to|-|–|until|through|till)\s*$/i}}function ye(e,t){const n=e.clone(),r=e.start,s=t.start;if(n.start=pe(r,s),null!=e.end||null!=t.end){const r=pe(null==e.end?e.start:e.end,null==t.end?t.start:t.end);if(null==e.end&&r.date().getTime()<n.start.date().getTime()){const e=r.dayjs().add(1,"day");r.isCertain("day")?o(r,e):c(r,e)}n.end=r}return n}function pe(t,n){const r=t.clone();return n.isCertain("hour")?(r.assign("hour",n.get("hour")),r.assign("minute",n.get("minute")),n.isCertain("second")?(r.assign("second",n.get("second")),n.isCertain("millisecond")?r.assign("millisecond",n.get("millisecond")):r.imply("millisecond",n.get("millisecond"))):(r.imply("second",n.get("second")),r.imply("millisecond",n.get("millisecond")))):(r.imply("hour",n.get("hour")),r.imply("minute",n.get("minute")),r.imply("second",n.get("second")),r.imply("millisecond",n.get("millisecond"))),n.isCertain("timezoneOffset")&&r.assign("timezoneOffset",n.get("timezoneOffset")),n.isCertain("meridiem")?r.assign("meridiem",n.get("meridiem")):null!=n.get("meridiem")&&null==r.get("meridiem")&&r.imply("meridiem",n.get("meridiem")),r.get("meridiem")==e.PM&&r.get("hour")<12&&(n.isCertain("hour")?r.assign("hour",r.get("hour")+12):r.imply("hour",r.get("hour")+12)),r.addTags(t.tags()),r.addTags(n.tags()),r}class ve extends he{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&null!=e.match(this.patternBetween())}mergeResults(e,t,n){const r=t.start.isOnlyDate()?ye(t,n):ye(n,t);return r.index=t.index,r.text=t.text+e+n.text,r}}class Te extends ve{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-|\\.|∙|:)?\\s*$")}}const we=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i");class xe{constructor(e){this.timezoneOverrides=e}refine(e,t){const n=e.option.timezones??{};return t.forEach((t=>{const r=e.text.substring(t.index+t.text.length),s=we.exec(r);if(!s)return;const i=s[1].toUpperCase(),a=t.start.date()??t.refDate??new Date,o={...this.timezoneOverrides,...n},l=f(i,a,o);if(null==l)return;e.debug((()=>{console.log(`Extracting timezone: '${i}' into: ${l} for: ${t.start}`)}));const c=t.start.get("timezoneOffset");if(null!==c&&l!=c){if(t.start.isCertain("timezoneOffset"))return;if(i!=s[1])return}t.start.isOnlyDate()&&i!=s[1]||(t.text+=s[0],t.start.isCertain("timezoneOffset")||t.start.assign("timezoneOffset",l),null==t.end||t.end.isCertain("timezoneOffset")||t.end.assign("timezoneOffset",l))})),t}}const be=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i");class Ee{refine(e,t){return t.forEach((function(t){if(t.start.isCertain("timezoneOffset"))return;const n=e.text.substring(t.index+t.text.length),r=be.exec(n);if(!r)return;e.debug((()=>{console.log(`Extracting timezone: '${r[0]}' into : ${t}`)}));let s=60*parseInt(r[2])+parseInt(r[3]||"0");s>840||("-"===r[1]&&(s=-s),null!=t.end&&t.end.assign("timezoneOffset",s),t.start.assign("timezoneOffset",s),t.text+=r[0])})),t}}class Se{refine(e,t){if(t.length<2)return t;const n=[];let r=t[0];for(let s=1;s<t.length;s++){const i=t[s];if(i.index>=r.index+r.text.length){n.push(r),r=i;continue}let a=null,o=null;i.text.length>r.text.length?(a=i,o=r):(a=r,o=i),e.debug((()=>{console.log(`${this.constructor.name} remove ${o} by ${a}`)})),r=a}return null!=r&&n.push(r),n}}class $e{refine(e,t){return e.option.forwardDate?(t.forEach((t=>{let n=a(e.refDate);if(t.start.isOnlyTime()&&n.isAfter(t.start.dayjs())&&(n=n.add(1,"day"),c(t.start,n),t.end&&t.end.isOnlyTime()&&(c(t.end,n),t.start.dayjs().isAfter(t.end.dayjs())&&(n=n.add(1,"day"),c(t.end,n))),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} time result (${t.start})`)}))),t.start.isOnlyWeekdayComponent()&&n.isAfter(t.start.dayjs())&&(n=n.day()>=t.start.get("weekday")?n.day(t.start.get("weekday")+7):n.day(t.start.get("weekday")),t.start.imply("day",n.date()),t.start.imply("month",n.month()+1),t.start.imply("year",n.year()),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} weekday (${t.start})`)})),t.end&&t.end.isOnlyWeekdayComponent()&&(n=n.day()>t.end.get("weekday")?n.day(t.end.get("weekday")+7):n.day(t.end.get("weekday")),t.end.imply("day",n.date()),t.end.imply("month",n.month()+1),t.end.imply("year",n.year()),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} weekday (${t.end})`)})))),t.start.isDateWithUnknownYear()&&n.isAfter(t.start.dayjs()))for(let r=0;r<3&&n.isAfter(t.start.dayjs());r++)t.start.imply("year",t.start.get("year")+1),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} year (${t.start})`)})),t.end&&!t.end.isCertain("year")&&(t.end.imply("year",t.end.get("year")+1),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} month (${t.start})`)})))})),t):t}}class Ce extends me{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug((()=>{console.log(`Removing unlikely result '${t.text}'`)})),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug((()=>{console.log(`Removing invalid result: ${t} (${t.end})`)})),!1):!this.strictMode||this.isStrictModeValid(e,t):(e.debug((()=>{console.log(`Removing invalid result: ${t} (${t.start})`)})),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug((()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)})),!1):!!(!t.start.isOnlyTime()||t.start.isCertain("hour")&&t.start.isCertain("minute"))||(e.debug((()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)})),!1)}}const Ae=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i");class De extends F{innerPattern(){return Ae}innerExtract(e,t){const n=e.createParsingComponents({year:parseInt(t[1]),month:parseInt(t[2]),day:parseInt(t[3])});if(null!=t[4]&&(n.assign("hour",parseInt(t[4])),n.assign("minute",parseInt(t[5])),null!=t[6]&&n.assign("second",parseInt(t[6])),null!=t[7]&&n.assign("millisecond",parseInt(t[7])),null!=t[8])){let e=0;if(t[9]){const n=parseInt(t[9]);let r=0;null!=t[10]&&(r=parseInt(t[10])),e=60*n,e<0?e-=r:e+=r}n.assign("timezoneOffset",e)}return n.addTag("parser/ISOFormatParser")}}class Le extends he{mergeResults(e,t,n){const r=n.clone();return r.index=t.index,r.text=t.text+e+r.text,r.start.assign("weekday",t.start.get("weekday")),r.end&&r.end.assign("weekday",t.start.get("weekday")),r}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&null!=e.match(/^,?\s*$/)}}function Me(e,t){let n=a(e.instant);const r=new y(e,{});return n=n.add(t,"day"),o(r,n),d(r,n),r}const Re=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i;class Pe extends F{innerPattern(e){return Re}innerExtract(t,n){let r=a(t.refDate);const s=n[0].toLowerCase();let i=t.createParsingComponents();switch(s){case"now":i=function(e){const t=a(e.instant),n=new y(e,{});return o(n,t),l(n,t),null!==e.timezoneOffset&&n.assign("timezoneOffset",t.utcOffset()),n.addTag("casualReference/now"),n}(t.reference);break;case"today":i=function(e){const t=a(e.instant),n=new y(e,{});return o(n,t),d(n,t),n.addTag("casualReference/today"),n}(t.reference);break;case"yesterday":i=function(e){return Me(e,-1)}(t.reference).addTag("casualReference/yesterday");break;case"tomorrow":case"tmr":case"tmrw":i=Me(t.reference,1).addTag("casualReference/tomorrow");break;case"tonight":i=function(t,n=22){const r=a(t.instant),s=new y(t,{});return o(s,r),s.imply("hour",n),s.imply("meridiem",e.PM),s.addTag("casualReference/tonight"),s}(t.reference);break;default:s.match(/last\s*night/)&&(r.hour()>6&&(r=r.add(-1,"day")),o(i,r),i.imply("hour",0))}return i.addTag("parser/ENCasualDateParser"),i}}const ke=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|midday|noon)(?=\W|$)/i;class Oe extends F{innerPattern(){return ke}innerExtract(t,n){let r=null;switch(n[1].toLowerCase()){case"afternoon":r=function(t,n=15){const r=new y(t,{});return r.imply("meridiem",e.PM),r.imply("hour",n),r.imply("minute",0),r.imply("second",0),r.imply("millisecond",0),r.addTag("casualReference/afternoon"),r}(t.reference);break;case"evening":case"night":r=function(t,n=20){const r=new y(t,{});return r.imply("meridiem",e.PM),r.imply("hour",n),r.addTag("casualReference/evening"),r}(t.reference);break;case"midnight":r=function(e){const t=new y(e,{}),n=a(e.instant);return n.hour()>2&&function(e,t){c(e,t=t.add(1,"day")),d(e,t)}(t,n),t.assign("hour",0),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/midnight"),t}(t.reference);break;case"morning":r=function(t,n=6){const r=new y(t,{});return r.imply("meridiem",e.AM),r.imply("hour",n),r.imply("minute",0),r.imply("second",0),r.imply("millisecond",0),r.addTag("casualReference/morning"),r}(t.reference);break;case"noon":case"midday":r=function(t){const n=new y(t,{});return n.imply("meridiem",e.AM),n.imply("hour",12),n.imply("minute",0),n.imply("second",0),n.imply("millisecond",0),n.addTag("casualReference/noon"),n}(t.reference)}return r&&r.addTag("parser/ENCasualTimeParser"),r}}function Ie(e,t){let n=t-e.getDay();return n<0&&(n+=7),n}function We(e,t){let n=t-e.getDay();return n>=0&&(n-=7),n}const Ne=new RegExp(`(?:(?:\\,|\\(|\\（)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${T(b)})(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i");class Ye extends F{innerPattern(){return Ne}innerExtract(e,n){const r=n[2].toLowerCase(),s=b[r],i=n[1],a=n[3];let o=i||a;o=o||"",o=o.toLowerCase();let l=null;return"last"==o||"past"==o?l="last":"next"==o?l="next":"this"==o&&(l="this"),function(e,n,r){const s=function(e,n,r){const s=e.getDay();switch(r){case"this":return Ie(e,n);case"last":return We(e,n);case"next":return s==t.SUNDAY?n==t.SUNDAY?7:n:s==t.SATURDAY?n==t.SATURDAY?7:n==t.SUNDAY?8:1+n:n<s&&n!=t.SUNDAY?Ie(e,n):Ie(e,n)+7}return function(e,t){const n=We(e,t),r=Ie(e,t);return r<-n?r:n}(e,n)}(e.getDateWithAdjustedTimezone(),n,r);let i=new y(e);return i=function(e,t){const n=e.clone();let r=e.dayjs();for(const e in t)r=r.add(t[e],e);return("day"in t||"d"in t||"week"in t||"month"in t||"year"in t)&&(n.imply("day",r.date()),n.imply("month",r.month()+1),n.imply("year",r.year())),("second"in t||"minute"in t||"hour"in t)&&(n.imply("second",r.second()),n.imply("minute",r.minute()),n.imply("hour",r.hour())),n}(i,{day:s}),i.assign("weekday",n),i}(e.reference,s,l)}}const ze=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${T(D)})(?=\\s*)(?=\\W|$)`,"i");class qe extends F{innerPattern(){return ze}innerExtract(e,t){const n=t[1].toLowerCase(),r=t[2].toLowerCase(),s=D[r];if("next"==n||n.startsWith("after")){const t={};return t[s]=1,y.createRelativeFromReference(e.reference,t)}if("last"==n||"past"==n){const t={};return t[s]=-1,y.createRelativeFromReference(e.reference,t)}const i=e.createParsingComponents();let o=a(e.reference.instant);return r.match(/week/i)?(o=o.add(-o.get("d"),"d"),i.imply("day",o.date()),i.imply("month",o.month()+1),i.imply("year",o.year())):r.match(/month/i)?(o=o.add(1-o.date(),"d"),i.imply("day",o.date()),i.assign("year",o.year()),i.assign("month",o.month()+1)):r.match(/year/i)&&(o=o.add(1-o.date(),"d"),o=o.add(-o.month(),"month"),i.imply("day",o.date()),i.imply("month",o.month()+1),i.assign("year",o.year())),i}}const Be=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i");class Fe{constructor(e){this.groupNumberMonth=e?3:2,this.groupNumberDay=e?2:3}pattern(){return Be}extract(e,t){const n=t.index+t[1].length,r=t.index+t[0].length-t[5].length;if(n>0&&e.text.substring(0,n).match("\\d/?$"))return;if(r<e.text.length&&e.text.substring(r).match("^/?\\d"))return;const s=e.text.substring(n,r);if(s.match(/^\d\.\d$/)||s.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/))return;if(!t[4]&&s.indexOf("/")<0)return;const i=e.createParsingResult(n,s);let a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12){if(!(o>=1&&o<=12&&a<=31))return null;[o,a]=[a,o]}if(o<1||o>31)return null;if(i.start.assign("day",o),i.start.assign("month",a),t[4]){const e=w(parseInt(t[4]));i.start.assign("year",e)}else{const t=x(e.refDate,o,a);i.start.imply("year",t)}return i}}const He=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${Y})(?=\\W|$)`,"i"),Ue=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${z})(?=\\W|$)`,"i");class Ve extends F{constructor(e=!0){super(),this.allowAbbreviations=e}innerPattern(){return this.allowAbbreviations?He:Ue}innerExtract(e,t){const n=t[1].toLowerCase();let r=q(t[2]);if(!r)return null;switch(n){case"last":case"past":case"-":r=ie(r)}return y.createRelativeFromReference(e.reference,r)}}function je(e){return null!=e.text.match(/^-/i)}class Ke extends he{shouldMergeResults(e,t,n){return!!e.match(/^\s*$/i)&&(null!=n.text.match(/^[+-]/i)||je(n))}mergeResults(e,t,n,r){let s=q(n.text);je(n)&&(s=ie(s));const i=y.createRelativeFromReference(new g(t.start.date()),s);return new p(t.reference,t.index,`${t.text}${e}${n.text}`,i)}}function _e(e){return null!=e.text.match(/\s+(before|from)$/i)}class Ge extends he{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!(!e.match(this.patternBetween())||!_e(t)&&(r=t,null==r.text.match(/\s+(after|since)$/i))||!n.start.get("day")||!n.start.get("month")||!n.start.get("year"));var r}mergeResults(e,t,n){let r=q(t.text);_e(t)&&(r=ie(r));const s=y.createRelativeFromReference(new g(n.start.date()),r);return new p(n.reference,t.index,`${t.text}${e}${n.text}`,s)}}const Je=new RegExp(`^\\s*(${P})`,"i");class Ze{refine(e,t){return t.forEach((function(t){if(!t.start.isDateWithUnknownYear())return;const n=e.text.substring(t.index+t.text.length),r=Je.exec(n);if(!r)return;e.debug((()=>{console.log(`Extracting year: '${r[0]}' into : ${t}`)}));const s=k(r[1]);null!=t.end&&t.end.assign("year",s),t.start.assign("year",s),t.text+=r[0]})),t}}class Xe{createCasualConfiguration(e=!1){const t=this.createConfiguration(!1,e);return t.parsers.push(new Pe),t.parsers.push(new Oe),t.parsers.push(new X),t.parsers.push(new qe),t.parsers.push(new Ve),t}createConfiguration(e=!0,t=!1){const n=function(e,t=!1){return e.parsers.unshift(new De),e.refiners.unshift(new Le),e.refiners.unshift(new Ee),e.refiners.unshift(new Se),e.refiners.push(new xe),e.refiners.push(new Se),e.refiners.push(new $e),e.refiners.push(new Ce(t)),e}({parsers:[new Fe(t),new j(e),new _,new J(t),new Ye,new ne,new se(e),new le(e),new ue(e)],refiners:[new Te]},e);return n.parsers.unshift(new ee(e)),n.refiners.unshift(new Ge),n.refiners.unshift(new Ke),n.refiners.unshift(new Se),n.refiners.push(new Te),n.refiners.push(new Ze),n.refiners.push(new ge),n}}class Qe{constructor(e){this.defaultConfig=new Xe,e=e||this.defaultConfig.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new Qe({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){const r=this.parse(e,t,n);return r.length>0?r[0].start.date():null}parse(e,t,n){const r=new et(e,t,n);let s=[];return this.parsers.forEach((e=>{const t=Qe.executeParser(r,e);s=s.concat(t)})),s.sort(((e,t)=>e.index-t.index)),this.refiners.forEach((function(e){s=e.refine(r,s)})),s}static executeParser(e,t){const n=[],r=t.pattern(e),s=e.text;let i=e.text,a=r.exec(i);for(;a;){const o=a.index+s.length-i.length;a.index=o;const l=t.extract(e,a);if(!l){i=s.substring(a.index+1),a=r.exec(i);continue}let c=null;l instanceof p?c=l:l instanceof y?(c=e.createParsingResult(a.index,a[0]),c.start=l):c=e.createParsingResult(a.index,a[0],l);const d=c.index,u=c.text;e.debug((()=>console.log(`${t.constructor.name} extracted (at index=${d}) '${u}'`))),n.push(c),i=s.substring(d+u.length),a=r.exec(i)}return n}}class et{constructor(e,t,n){this.text=e,this.reference=new g(t),this.option=n??{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof y?e:new y(this.reference,e)}createParsingResult(e,t,n,r){const s="string"==typeof t?t:this.text.substring(e,t),i=n?this.createParsingComponents(n):null,a=r?this.createParsingComponents(r):null;return new p(this.reference,e,s,i,a)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var nt,rt,st=null,it=null,at=null,ot=null,lt=null,ct=[];function dt(){ot&&(ot.remove(),ot=null),lt&&(lt.remove(),lt=null)}function ut(e){Array.isArray(e)||(e=[e]),chrome.storage.local.get("savedTabs",(function(t){var n=t.savedTabs||[];e.forEach((function(e){var t=n.findIndex((function(t){return t.id===e}));-1!==t&&(n.splice(t,1),console.log("Tab deleted:",e))})),chrome.storage.local.set({savedTabs:n},(function(){console.log("Updated storage with remaining tabs")}))}))}function mt(e){var t=Array.isArray(e)?e:[e],n=[];t.forEach((function(e){var r=parseInt(e.replace("tab-",""));chrome.tabs.get(r,(function(e){var s={title:e.title,url:e.url,favIconUrl:e.favIconUrl||"",id:r,color:"#FFFFFF"};n.push(s),n.length===t.length&&chrome.storage.local.get("savedTabs",(function(e){var r,s=e.savedTabs||[],i=[].concat(function(e){if(Array.isArray(e))return tt(e)}(r=s)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return tt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tt(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n);chrome.storage.local.set({savedTabs:i},(function(){chrome.tabs.query({active:!0,currentWindow:!0},(function(e){var n=e[0];chrome.tabs.remove(t.map((function(e){return parseInt(e.replace("tab-",""))})),(function(){chrome.tabs.update(n.id,{active:!0})}))}))}))}))}))}))}function ht(e){var t=new Qe,n=t.parseDate(e),r=n?t.parse(e)[0].text:"";return{parsedDate:n,remainingNote:n?e.replace(r,"").trim():e,detectedDateText:r}}function ft(){var e=document.getElementById("columns-container").querySelectorAll(".column"),t=[];e.forEach((function(e){var n=e.id,r=e.querySelectorAll(".tab-item"),s=Array.from(r).map((function(e){return e.id})),i=e.querySelector(".column-title-text").textContent,a=e.classList.contains("minimized");t.push({id:n,tabIds:s,title:i,minimized:a})})),chrome.storage.local.set({columnState:t},(function(){console.log("Column state saved:",t)}))}function gt(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=document.getElementById("columns-container"),s=document.createElement("div");s.classList.add("column"),n?s.classList.add("minimized"):s.classList.remove("minimized"),s.id=t||"column-".concat(Date.now()),s.addEventListener("dragover",Et),s.addEventListener("drop",St);var i=document.createElement("div");i.classList.add("header-container");var a=document.createElement("button");a.classList.add("open-all"),a.title="Open All",a.innerHTML='<img src="../icons/openall.svg" width="24" height="24" class="main-grid-item-icon" />',a.addEventListener("click",pt);var o=document.createElement("button");o.classList.add("minimize-column"),o.title="Minimize Column",o.innerHTML='<img src="../icons/minimize.svg" width="24" height="24" class="main-grid-item-icon" />',o.addEventListener("click",(function(){vt(s),ft()}));var l=document.createElement("button");l.classList.add("maximize-column"),l.title="Maximize Column",l.innerHTML='<img src="../icons/maximize.svg" width="24" height="24" class="main-grid-item-icon" />',l.addEventListener("click",(function(){!function(e){var t=e.querySelector(".column-title-text"),n=e.querySelector(".maximize-column"),r=e.querySelector(".minimize-column"),s=e.querySelector(".open-all"),i=e.querySelector(".delete-column"),a=e.querySelector(".header-container");e.classList.remove("minimized"),t.classList.remove("vertical-text"),n.style.display="none",r.style.display="inline",s.style.display="inline",i.style.display="inline",a.classList.remove("vertical"),e.querySelectorAll(".tab-item").forEach((function(e){e.style.display="flex"}))}(s),ft()})),l.style.display=n?"inline":"none";var c=document.createElement("input");c.type="text",c.classList.add("column-title"),c.placeholder="Enter column title";var d=document.createElement("button");d.classList.add("delete-column"),d.title="Delete Column",d.innerHTML='<img src="../icons/delete-icon.svg" class="main-grid-item-icon" width="24" height="24"/>',d.addEventListener("click",yt);var u=document.createElement("h2");u.classList.add("column-title-text"),e&&(u.textContent=e,u.style.display="inline",c.style.display="none"),c.addEventListener("blur",(function(){""!==c.value.trim()&&(u.textContent=c.value,c.style.display="none",u.style.display="inline"),s.setAttribute("draggable","true"),ft()})),u.addEventListener("click",(function(){s.setAttribute("draggable","false"),c.value=u.textContent,c.style.display="inline",u.style.display="none",c.focus();var e=c.value.length;c.setSelectionRange(e,e),s.classList.contains("minimized")&&c.classList.add("vertical-text")})),c.addEventListener("keydown",(function(e){"Enter"===e.key&&c.blur()}));var m=document.createElement("div");m.classList.add("title-group"),i.appendChild(o),i.appendChild(l),m.appendChild(c),m.appendChild(u),m.appendChild(a),i.appendChild(m),i.appendChild(d),s.appendChild(i),r.appendChild(s);var h=r.querySelector(".new-column-indicator");return h&&r.appendChild(h),s}function yt(e){var t=e;e instanceof Event&&(t=e.target.closest(".column"));var n=t.querySelectorAll(".tab-item");ut(Array.from(n).map((function(e){return e.id})).map((function(e){return parseInt(e.replace("tab-",""))}))),t.remove(),ft()}function pt(e){var t=e.target.closest(".column").querySelectorAll(".tab-item");Array.from(t).map((function(e){return e.dataset.url})).forEach((function(e){window.open(e,"_blank")}))}function vt(e){var t=e.querySelector(".column-title-text"),n=e.querySelector(".maximize-column"),r=e.querySelector(".minimize-column"),s=e.querySelector(".open-all"),i=e.querySelector(".delete-column"),a=e.querySelector(".header-container");e.classList.add("minimized"),t.classList.add("vertical-text"),n.style.display="inline",r.style.display="none",s.style.display="none",i.style.display="none",a.classList.add("vertical"),e.querySelectorAll(".tab-item").forEach((function(e){e.style.display="none"}))}function Tt(e){e.stopPropagation(),dt();var t=e.target.closest(".tab-item");t&&(e.dataTransfer.setData("text/plain",t.id),e.dataTransfer.setDragImage(t,0,0),it="list-item",t.classList.add("dragging"))}function wt(e){e.target.closest(".tab-item").classList.remove("dragging"),st&&(st.style.display="none")}function xt(e,t){for(var n=t.length,r=0;r<t.length;r++){var s=t[r].getBoundingClientRect();if(e.clientY<s.top+s.height/2){n=r;break}}return n}function bt(e){nt.contains(e.relatedTarget)||nt.classList.remove("deletion-area-active"),rt.contains(e.relatedTarget)||rt.classList.remove("new-column-indicator-active")}function Et(e){e.preventDefault();var t=250;if(e.clientX<t?window.scrollBy({left:-72,behavior:"smooth"}):window.innerWidth-e.clientX<t&&window.scrollBy({left:72,behavior:"smooth"}),e.clientY<t?window.scrollBy({top:-72,behavior:"smooth"}):window.innerHeight-e.clientY<t&&window.scrollBy({top:72,behavior:"smooth"}),nt.style.display="flex",e.target===nt)return nt.classList.add("deletion-area-active"),st.style.display="none",void(e.dataTransfer.dropEffect="move");if(e.target===rt)return rt.classList.add("new-column-indicator-active"),st.style.display="none",void(e.dataTransfer.dropEffect="move");var n=e.target.closest(".column")||e.target.closest("#open-tabs-list"),r=document.getElementById("columns-container");if(st||((st=document.createElement("div")).className="drop-indicator",document.body.appendChild(st)),"list-item"===it&&n){rt.style.display="flex";var s=n.getBoundingClientRect(),i=Array.from(n.querySelectorAll(".tab-item")),a=xt(e,i);if(st.style.width="".concat(s.width,"px"),st.style.height="2px",st.style.left="".concat(s.left+window.scrollX,"px"),st.style.top="".concat(s.top+window.scrollY,"px"),a===i.length){var o=i[i.length-1];st.style.top="".concat(o?o.getBoundingClientRect().bottom+window.scrollY:s.top+window.scrollY,"px")}else st.style.top="".concat(i[a].getBoundingClientRect().top+window.scrollY,"px")}else if("column"===it&&r){var l=r.getBoundingClientRect(),c=Array.from(r.querySelectorAll(".column")),d=At(e,c);if(st.style.width="2px",st.style.height="".concat(l.height,"px"),st.style.top="".concat(l.top,"px"),d===c.length){var u=c[c.length-1];st.style.left="".concat(u?u.getBoundingClientRect().right+window.scrollX:l.left+window.scrollX,"px")}else{var m=c[d].getBoundingClientRect();st.style.left="".concat(m.left+window.scrollX,"px")}rt.style.display="none"}st.style.display="block",e.dataTransfer.dropEffect="move"}function St(e){e.preventDefault();var t=document.getElementById("columns-container"),n=t.querySelector(".new-column-indicator"),r=e.dataTransfer.getData("text/plain"),s=document.getElementById(r);if(s&&s.classList.contains("column")){if(e.target===nt)return yt(s),nt.style.display="none",nt.classList.remove("deletion-area-active"),void(n&&(n.style.display="none"));nt.style.display="none",nt.classList.remove("deletion-area-active");var i=Array.from(t.querySelectorAll(".column")),a=At(e,i);return a===i.length?t.appendChild(s):t.insertBefore(s,i[a]),n&&t.appendChild(n),st&&(st.style.display="none"),n&&(n.style.display="none"),void ft()}nt.style.display="none",nt.classList.remove("deletion-area-active");var o=e.target.closest(".column")||e.target.closest("#open-tabs-list");if(!o&&e.target!==nt&&e.target!==n)return st&&(st.style.display="none"),void(n&&(n.style.display="none"));var l=e.dataTransfer.getData("text/plain"),c=document.getElementById(l);if(c&&c.classList.contains("tab-item")){var d=document.querySelectorAll(".selected"),u=c.classList.contains("selected")&&d.length>1?d:[c],m=[],h=[],f=[];if(e.target===nt)return u.forEach((function(e){var t=e.id;t.startsWith("tab-")?m.push(parseInt(t.replace("tab-",""))):t.startsWith("opentab")&&chrome.tabs.remove(parseInt(t.replace("opentab-","")),(function(){console.log("Tab closed:",t)})),e.parentNode.removeChild(e)})),ut(m),void ft();if(e.target===n){n.style.display="none";var g=gt("New Column");return u.forEach((function(e){e.id.startsWith("opentab-")&&h.push(e.id.replace("opentab-","")),g.appendChild(e)})),h.length>0&&mt(h),ft(),void Lt(ct)}var y=Array.from(o.querySelectorAll(".tab-item")),p=xt(e,y);u.forEach((function(e){y=Array.from(o.querySelectorAll(".tab-item"));var t=e.id;"open-tabs-list"!==o.id&&t.startsWith("opentab")&&(t=t.replace("opentab-","tab-"),e.id=t,h.push(t)),"open-tabs-list"===o.id&&t.startsWith("tab")&&(window.open(e.dataset.url,"_blank"),m.push(parseInt(t.replace("tab-","")))),f.push({item:e,dropPosition:p}),"open-tabs-list"===o.id&&chrome.tabs.move(parseInt(t.split("-")[1]),{index:p},(function(){console.log("Tab moved:",t,"to index:",p)}))})),h.length>0&&mt(h),m.length>0&&ut(m),f.forEach((function(e){var t=e.item,n=e.dropPosition;n===y.length?o.appendChild(t):o.insertBefore(t,y[n])})),st&&(st.style.display="none"),n&&(n.style.display="none"),ft()}}function $t(e){if(dt(),e.target.closest(".tab-item"))e.preventDefault();else{var t=e.target.closest(".column");t&&(e.dataTransfer.setData("text/plain",t.id),e.dataTransfer.setDragImage(t,0,0),it="column",t.classList.add("dragging"))}}function Ct(e){e.target.closest(".column").classList.remove("dragging"),st&&(st.style.display="none")}function At(e,t){for(var n=t.length,r=0;r<t.length;r++){var s=t[r].getBoundingClientRect();if(e.clientX<s.left+s.width/2){n=r;break}}return n}function Dt(e){var t="",n=-1;if(e)if(0===(n=function(e){var t=new Date;t.setHours(0,0,0,0);var n=new Date(e);n.setHours(0,0,0,0);var r=n.getTime()-t.getTime();return Math.ceil(r/864e5)}(e=new Date(e))))t="Today";else if(1===n)t="Tomorrow";else if(n>=2&&n<=7)t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()];else{var r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),i=String(e.getFullYear()).slice(-2);t="".concat(r,"/").concat(s,"/").concat(i)}return{formattedDate:t,dateDisplayColor:n<0?"#e63c30":"Today"===t?"#058527":"Tomorrow"===t?"#C76E00":"#ababab"}}function Lt(e){var t=document.getElementById("columns-container");t.addEventListener("dragover",Et),t.addEventListener("drop",St),t.innerHTML="",chrome.storage.local.get("columnState",(function(n){var r=n.columnState||[];0===r.length?gt("New Column"):(console.log(r),r.forEach((function(t){var n=gt(t.title,t.id,t.minimized);n.setAttribute("draggable","true"),n.addEventListener("dragstart",$t),n.addEventListener("dragend",Ct),t.tabIds.forEach((function(t){var r=e.find((function(e){return"".concat(e.id)===t.split("-")[1]}));if(r){var s=document.createElement("li");s.style.userSelect="none",s.id="tab-".concat(r.id),s.style.backgroundColor=r.color,s.classList.add("tab-item"),s.dataset.url=r.url,s.draggable=!0,s.addEventListener("dragstart",Tt),s.addEventListener("dragend",wt);var i=Dt(r.parsedDate),a=i.formattedDate,o=i.dateDisplayColor,l=a,c=o;s.innerHTML+='\n                            <div class="tab-info-container">\n                                <div class="tab-info-left">\n                                    <img src="'.concat(r.favIconUrl,'" width="24" height="24">\n                                </div>\n                                <div class="tab-info-right">\n                                    <span class="tab-title" data-url="').concat(r.url,'" id="title-display-').concat(r.id,'">').concat(r.title,'</span>\n                                    <input type="text" class="hidden" id="title-input-').concat(r.id,'" value="').concat(r.title,'">\n                                    <div class="note-display fixed-width" id="note-display-').concat(r.id,'">').concat(r.note?r.note.replace(/\n/g,"<br>"):"",'</div>\n                                    <textarea class="tab-note hidden" id="note-input-').concat(r.id,'" rows="1">').concat(r.note?r.note.replace(/<br>/g,"\n"):"",'</textarea>\n                                    <div class="date-display ').concat(a?"":"hidden",'" id="date-display-').concat(r.id,'">').concat(a||"",'</div>\n                                </div>\n                                <div class="tab-actions">\n                                    <button class="more-options" data-index="').concat(r.id,'">\n                                        <img src="../icons/morevertical.svg" class="main-grid-item-icon" />\n                                    </button>\n                                </div>\n                            </div>\n                        ');var d=s.querySelector("#date-display-".concat(r.id));d.style.backgroundColor=c,n.appendChild(s),s.querySelector(".tab-info-left").addEventListener("click",(function(e){e.stopPropagation();var t=document.querySelectorAll(".selected"),n=Array.from(document.querySelectorAll("li")),r=n.indexOf(s);if(e.ctrlKey||e.metaKey)s.classList.toggle("selected");else if(e.shiftKey&&null!==at)for(var i=Math.min(at,r),a=Math.max(at,r),o=i;o<=a;o++)n[o].classList.add("selected");else 1===t.length&&t[0]===s?s.classList.remove("selected"):(t.forEach((function(e){return e.classList.remove("selected")})),s.classList.add("selected"));at=r}));var u=s.querySelector(".tab-title");u.addEventListener("click",(function(){window.location.href=u.dataset.url})),document.addEventListener("click",(function(e){var t=Array.from(document.querySelectorAll("li"));t.some((function(t){return t.contains(e.target)}))||t.forEach((function(e){return e.classList.remove("selected")}))}));var m=s.querySelector(".more-options");m.addEventListener("click",(function(t){if(t.stopPropagation(),ot&&ot.dataset.tabId===r.id.toString())dt();else{dt();var n=document.createElement("div");n.className="options-menu",n.dataset.tabId=r.id.toString();var i=r.note&&""!==r.note.trim()?"Edit Note":"Add Note";n.innerHTML='\n                                <button class="menu-option rename-tab" data-index="'.concat(r.id,'">Rename</button>\n                                <button class="menu-option add-note" data-index="').concat(r.id,'">').concat(i,'</button>\n                                <button class="menu-option remove-date ').concat(a?"":"hidden",'" data-index="').concat(r.id,'">Clear Date</button>\n                                <button class="menu-option color-tab" data-index="').concat(r.id,'">Color</button>\n                                <button class="menu-option delete-tab" data-index="').concat(r.id,'">Delete</button>\n                            '),document.body.appendChild(n);var o=m.getBoundingClientRect();n.style.top="".concat(o.bottom+window.scrollY,"px"),n.style.left="".concat(o.left+window.scrollX,"px"),n.style.display="flex",ot=n;var l=null,c=function(e){n.contains(e.target)||e.target===m||(dt(),document.removeEventListener("click",c))};document.addEventListener("click",c);var u=n.querySelector(".color-tab");u.addEventListener("click",(function(t){if(t.stopPropagation(),lt)return lt.remove(),void(lt=null);(l=document.createElement("div")).classList.add("color-menu"),["#FFFFFF","#f7c2d6","#f1ffc4","#c6e2e9","#e9c8fa"].forEach((function(t){var n=document.createElement("div");n.classList.add("color-option"),n.style.backgroundColor=t,n.addEventListener("click",(function(){r.color=t,s.style.backgroundColor=t,chrome.storage.local.set({savedTabs:e},(function(){console.log("Tab color saved:",r.id,r.color)})),dt(),document.removeEventListener("click",c)})),l.appendChild(n)})),document.body.appendChild(l);var n=u.getBoundingClientRect();l.style.top="".concat(n.top+window.scrollY,"px"),l.style.left="".concat(n.right+window.scrollX,"px"),lt=l})),n.querySelector(".rename-tab").addEventListener("click",(function(){s.removeEventListener("dragstart",Tt);var e=s.querySelector("#title-display-".concat(r.id)),t=s.querySelector("#title-input-".concat(r.id));t.classList.remove("hidden"),e.classList.add("hidden"),t.focus();var n=t.value.length;t.setSelectionRange(n,n),t.addEventListener("keydown",(function n(r){"Enter"===r.key&&(e.textContent=t.value,t.classList.add("hidden"),e.classList.remove("hidden"),t.removeEventListener("keydown",n))})),dt()}));var h=s.querySelector("#title-display-".concat(r.id)),f=s.querySelector("#title-input-".concat(r.id));f.addEventListener("blur",(function(){var e=f.value;!function(e,t){chrome.storage.local.get("savedTabs",(function(n){var r=n.savedTabs||[],s=r.findIndex((function(t){return t.id===e}));r[s].title=t,chrome.storage.local.set({savedTabs:r},(function(){console.log("Tab title saved:",e,t)}))}))}(r.id,e),h.textContent=e,f.classList.add("hidden"),h.classList.remove("hidden"),s.addEventListener("dragstart",Tt)})),n.querySelector(".add-note").addEventListener("click",(function(){s.removeEventListener("dragstart",Tt);var e=s.querySelector("#note-display-".concat(r.id)),t=s.querySelector("#note-input-".concat(r.id));t.classList.remove("hidden"),e.classList.add("hidden"),t.focus();var n=t.value.length;t.setSelectionRange(n,n),dt()})),n.querySelector(".delete-tab").addEventListener("click",(function(){ut(r.id),dt(),Lt(ct)})),n.querySelector(".remove-date").addEventListener("click",(function(){r.parsedDate=null,d.textContent="",d.classList.add("hidden"),chrome.storage.local.set({savedTabs:e},(function(){console.log("Tab date removed:",r.id)})),dt()}))}}));var h=s.querySelector("#note-display-".concat(r.id)),f=s.querySelector("#note-input-".concat(r.id));h.addEventListener("click",(function(){if(s.removeEventListener("dragstart",Tt),f.classList.contains("hidden")){f.classList.remove("hidden"),h.classList.add("hidden"),f.focus();var e=f.value.length;f.setSelectionRange(e,e)}})),f.addEventListener("blur",(function(){var e=f.value;!function(e,t){chrome.storage.local.get("savedTabs",(function(n){var r=n.savedTabs||[],s=r.findIndex((function(t){return t.id===e})),i=ht(t),a=i.parsedDate,o=i.remainingNote;r[s].note=o.replace(/\n/g,"<br>"),a&&(r[s].parsedDate=a.getTime()),chrome.storage.local.set({savedTabs:r},(function(){console.log("Tab note saved:",e,o)}))}))}(r.id,e),h.innerHTML=e?e.replace(/\n/g,"<br>"):"",f.classList.add("hidden"),h.classList.remove("hidden"),s.addEventListener("dragstart",Tt)})),f.addEventListener("keydown",(function(e){if("Enter"!==e.key||e.shiftKey){if("Enter"===e.key&&e.shiftKey){var t=f.selectionStart,n=f.selectionEnd;f.value=f.value.substring(0,t)+"\n"+f.value.substring(n),f.selectionStart=f.selectionEnd=t+1,e.preventDefault()}}else f.blur()})),f.addEventListener("input",(function(){var e=f.value,t=ht(e).detectedDateText,n=e.replace(t,'<span style="color: red;">'.concat(t,"</span>"));h.innerHTML=n;var i=s.querySelector("#date-display-".concat(r.id)),a=(new Qe).parseDate(e);if(a){var o=Dt(a),d=o.formattedDate,u=o.dateDisplayColor;i.textContent=d,i.classList.remove("hidden"),i.style.backgroundColor=u}else l?(i.textContent=l,i.classList.remove("hidden"),i.style.backgroundColor=c):i.classList.add("hidden")}))}})),t.minimized&&vt(n)}))),(rt=document.createElement("div")).classList.add("new-column-indicator");var s=document.createElement("img");s.src="../icons/newcolumn.svg",s.classList.add("new-column-icon"),rt.appendChild(s),rt.addEventListener("dragleave",bt),t.appendChild(rt)}))}function Mt(){chrome.tabs.query({currentWindow:!0},(function(e){e=e.filter((function(e){return!(e.url.startsWith("chrome://")||e.url.startsWith("edge://")||e.url.startsWith("opera://")||e.url.startsWith("vivaldi://")||e.url.startsWith("brave://")||e.url.startsWith("about:")||e.url.startsWith("file://"))}));var t=document.getElementById("open-tabs-list");t.innerHTML="",e.forEach((function(e,n){var r=document.createElement("li");r.style.userSelect="none",r.draggable=!0,r.addEventListener("dragstart",Tt),r.addEventListener("dragend",wt),r.id="opentab-".concat(e.id),r.classList.add("tab-item"),r.innerHTML+='\n                <div class="tab-info-container">\n                    <div class="tab-info-left">\n                        <img src="'.concat(e.favIconUrl,'" width="24" height="24">\n                    </div>\n                    <div class="tab-info-right">\n                        <span class="tab-title">').concat(e.title,'</span>\n                    </div>\n                    <div class="tab-actions">\n                        <img src="../icons/close.svg" alt="Close" class="close-button">\n                    </div>\n                </div>\n            '),r.querySelector(".close-button").addEventListener("click",(function(){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){var n=t[0];chrome.tabs.remove(e.id,(function(){chrome.tabs.update(n.id,{active:!0})}))}))})),r.setAttribute("data-tab-id",e.id),r.setAttribute("data-index",n),r.querySelector(".tab-info-left").addEventListener("click",(function(e){e.stopPropagation();var t=document.querySelectorAll(".selected"),n=Array.from(document.querySelectorAll("li")),s=n.indexOf(r);if(e.ctrlKey||e.metaKey)r.classList.toggle("selected");else if(e.shiftKey&&null!==at)for(var i=Math.min(at,s),a=Math.max(at,s),o=i;o<=a;o++)n[o].classList.add("selected");else 1===t.length&&t[0]===r?r.classList.remove("selected"):(t.forEach((function(e){return e.classList.remove("selected")})),r.classList.add("selected"));at=s})),document.addEventListener("click",(function(e){var t=Array.from(document.querySelectorAll("li"));t.some((function(t){return t.contains(e.target)}))||t.forEach((function(e){return e.classList.remove("selected")}))})),r.querySelector(".tab-title").addEventListener("click",(function(){document.querySelectorAll("li").forEach((function(e){return e.classList.remove("selected")})),chrome.tabs.update(e.id,{active:!0})})),t.appendChild(r)})),t.addEventListener("dragover",Et),t.addEventListener("drop",St)}))}document.getElementById("add-column").addEventListener("click",(function(){gt("New Column"),ft(),Lt(ct)})),function(){(nt=document.createElement("div")).id="deletion-area";var e=document.createElement("img");e.src="../icons/delete-icon.svg",e.alt="Delete Icon",e.classList.add("delete-icon"),nt.appendChild(e),nt.addEventListener("dragover",Et),nt.addEventListener("drop",St),nt.addEventListener("dragleave",bt),document.body.appendChild(nt)}(),chrome.storage.local.get("sidebarCollapsed",(function(e){var t=document.getElementById("sidebar");e.sidebarCollapsed?t.classList.add("collapsed"):t.classList.remove("collapsed")})),chrome.tabs.onUpdated.addListener(Mt),chrome.tabs.onRemoved.addListener(Mt),chrome.storage.onChanged.addListener((function(e,t){"local"===t&&e.savedTabs&&(ct=e.savedTabs.newValue.filter((function(e){return!("temp"in e)})),chrome.storage.local.get("columnState",(function(e){e.columnState.length>0&&Lt(ct)})))})),chrome.storage.onChanged.addListener((function(e,t){"local"===t&&e.bgTabs&&chrome.storage.local.get(["columnState","bgTabs","savedTabs"],(function(e){var t=e.columnState||[],n=e.bgTabs||[],r=e.savedTabs||[],s=n.map((function(e){return e.id}));0===t.length&&t.push({id:"defaultColumn",tabIds:[],title:"New Column"});var i=t[0],a=s.map((function(e){return"tab-".concat(e)}));i.tabIds=i.tabIds.concat(a),r=r.concat(n),chrome.storage.local.set({columnState:t,bgTabs:[],savedTabs:r},(function(){console.log("Migrated bgTabs")}))}))})),Mt(),chrome.storage.local.get(["columnState","bgTabs","savedTabs"],(function(e){var t=e.columnState||[],n=e.bgTabs||[],r=e.savedTabs||[],s=n.map((function(e){return e.id}));0===t.length&&t.push({id:"defaultColumn",tabIds:[],title:"New Column"});var i=t[0],a=s.map((function(e){return"tab-".concat(e)}));i.tabIds=i.tabIds.concat(a),(r=(r=r.concat(n)).filter((function(e){return!("temp"in e)}))).push({temp:Date.now()}),chrome.storage.local.set({columnState:t,bgTabs:[],savedTabs:r},(function(){console.log("Migrated bgTabs")}))})),Lt(ct)})()})();